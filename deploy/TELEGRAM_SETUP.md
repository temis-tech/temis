# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `telegram` –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (—Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º)
3. ‚úÖ URL –¥–ª—è webhook –¥–æ–±–∞–≤–ª–µ–Ω: `/api/telegram/webhook/`

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh administrator@85.190.102.101
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏ webhook –¥–ª—è –±–æ—Ç–∞

```bash
cd /var/www/temis/backend
sudo -u www-data ./venv/bin/python manage.py setup_webhook
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç webhook –Ω–∞ URL: `https://api.temis.ooo/api/telegram/webhook/`

### 3. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫–µ

1. –û—Ç–∫—Ä–æ–π –∞–¥–º–∏–Ω–∫—É: `https://api.temis.ooo/admin/`
2. –ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞"
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ:
   - –¢–æ–∫–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `8576779956:AAEmqm1yQmtO06aiXdcdUfi-H4ZKqecbZBo`
   - –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω (–≤–∫–ª—é—á–∏ –≥–∞–ª–æ—á–∫—É "–ê–∫—Ç–∏–≤–µ–Ω")
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–∫–ª—é—á–µ–Ω—ã

### 4. –ê–∫—Ç–∏–≤–∏—Ä—É–π –±–æ—Ç–∞ –≤ Telegram

1. –ù–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É `/start` –∏–ª–∏ `/help`
3. –í –∞–¥–º–∏–Ω–∫–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å –æ –Ω–æ–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram"

### 5. –ù–∞–∑–Ω–∞—á—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. –í –∞–¥–º–∏–Ω–∫–µ –ø–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram"
2. –ù–∞–π–¥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. –û—Ç–º–µ—Ç—å –≥–∞–ª–æ—á–∫—É **"–ê–¥–º–∏–Ω"**
4. –°–æ—Ö—Ä–∞–Ω–∏

**–í–∞–∂–Ω–æ:** –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –æ—Ç–º–µ—á–µ–Ω–Ω–æ–π –≥–∞–ª–æ—á–∫–æ–π "–ê–¥–º–∏–Ω" –±—É–¥—É—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

### 6. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –±–∞–Ω–Ω–µ—Ä–æ–≤

–î–æ–±–∞–≤—å –≤ cron –∑–∞–¥–∞—á—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–Ω–Ω–µ—Ä–æ–≤:

```bash
sudo crontab -e -u www-data
```

–î–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É:

```
* * * * * cd /var/www/temis/backend && ./venv/bin/python manage.py check_banners
```

–≠—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –±–∞–Ω–Ω–µ—Ä—ã –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞—á–∞–ª–µ/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä—å webhook

```bash
curl https://api.telegram.org/bot8576779956:AAEmqm1yQmtO06aiXdcdUfi-H4ZKqecbZBo/getWebhookInfo
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º webhook.

### –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

```bash
# –õ–æ–≥–∏ Django
sudo journalctl -u temis-backend -f

# –ò–ª–∏ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
tail -f /var/www/temis/backend/logs/*.log
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Webhook –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –¥–æ–º–µ–Ω `api.temis.ooo` –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω: `curl https://api.temis.ooo/api/telegram/webhook/`

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –±–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –≤ –∞–¥–º–∏–Ω–∫–µ
2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–º–µ—á–µ–Ω–∞ –≥–∞–ª–æ—á–∫–∞ "–ê–¥–º–∏–Ω"
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–∫–ª—é—á–µ–Ω—ã –¥–ª—è –Ω—É–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Django –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ URL webhook –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

